<div class="modal-header bg-light pb-4">
    <h6 class="modal-title m-0 font-light" id="modal-basic-title">
        <img src="../../../../../assets/images/formulas-icon-blue.svg" /> {{heading}}
    </h6>
    <button class="btn btn-outline-primary btn-sm float-right" (click)="saveFormulas()">
        <i-feather name="x"></i-feather>
    </button>
</div>
<div class="modal-body p-4">
    <div class="mb-3" *ngFor="let module of moduleList;let i=index;">
        <h5>{{module.name}} {{"plan.surrender.formulas" | translate}}</h5>
        <div class="row mb-3">
            <div class="col-12 mb-3" *ngIf="module.name !== 'Cancellation'"
                [ngStyle]="{'cursor': disableControl ? '' : 'pointer' }" (click)="setSelectedFormula(module)">
                <div class="card card-formula bg-primary-50" [ngClass]="{'selected':!module.selectedFormula}">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-6 d-flex align-items-center">
                                <div class="form-check d-flex align-items-center">
                                    <input class="form-check-input" type="radio" name="{{module.name}}options"
                                        id="{{module.name}}-{{i}}"
                                        [ngModel]="(module.selectedFormula === undefined || module.selectedFormula === null ? 1 : 0)"
                                        [disabled]="disableControl" [value]="1" (click)="setSelectedFormula(module)">
                                    <label class="form-check-label ml-1" for="{{module.name}}-{{i}}">
                                        {{"plan.noFormulaText" | translate}}
                                    </label>
                                </div>
                            </div>
                            <div class="footnote-text col-6">
                                <p>
                                    <strong>{{module.name}}</strong> is disabled
                                </p>
                                <p>{{"plan.chooseFormulaText" | translate}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 mb-3" *ngFor="let formula of module.formulas;let m=index;"
                [ngStyle]="{'cursor': disableControl ? '' : 'pointer' }" (click)="setSelectedFormula(module,formula)">
                <div class="card card-formula bg-primary-50"
                    [ngClass]="{'selected':module.selectedFormula && module.selectedFormula.moduleOID === formula.moduleOID}">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-6 d-flex align-items-center">
                                <div class="form-check d-flex align-items-center">
                                    <input class="form-check-input" type="radio" name="{{module.name}}options"
                                        id="{{module.name}}-{{m}}"
                                        [(ngModel)]="module.selectedFormula && module.selectedFormula.moduleOID"
                                        [disabled]="disableControl" [value]="formula.moduleOID"
                                        (click)="setSelectedFormula(module,formula)">
                                    <label class="form-check-label ml-1" for="{{module.name}}-{{m}}"
                                        [innerHTML]="safeHtml(formula.uiDisplayElement)">
                                    </label>
                                </div>
                            </div>
                            <div class="footnote-text col-6 d-flex align-items-center">
                                <div class="formula-info-wrapper" [innerHTML]="safeHtml(formula.uiHelpText)"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="plan-formula" [ngStyle]="{'cursor': disableControl ? '' : 'pointer' }" [ngClass]="
            formula.selected
              ? ' bg-primary text-white'
              : ' bg-light'" *ngFor="let formula of module.formulas;"
            (click)="!disableControl && $event ? setFormulOnDivClick(formula,module) : null">
            <div class="d-flex">
                <div class="w-100">
                    <h5 [ngClass]="
                    formula.selected
                      ? 'card-title text-white font-default heading'
                      : 'card-title font-default heading'
                  ">{{formula.uiDisplayElement}} </h5>
                </div>
                <div class="p-2 flex-shrink-1">
                    <div class="form-check">
                        <label class="form-check-label pr-4 text-white" *ngIf="formula['selected']">
                            Selected
                        </label>
                        <input class="form-check-input" type="checkbox" [disabled]="disableControl"
                            [(ngModel)]="formula['selected']" (change)="$event ? setFormula(formula,module) : null">
                    </div>
                </div>
            </div>
            <p class="card-text info-text" [ngClass]="
                formula.selected
                  ? ' text-white'
                  : ''
     
              " [innerHTML]="formula.uiHelpText"></p>
            <div class="row" *ngIf="showDeathBenefitPercent">

                <div class="col-6">
                    <div class="form-group" [ngClass]="{
        'is-invalid':
          saveClicked &&
          (deathBenefitPercent.invalid ||
            deathBenefitPercent?.errors?.min)
      }">
                        <label [ngClass]="
                        formula.selected
                          ? 'form-control-label text-white' : 'form-control-label'">{{
                            "plan.deathBenefitModule.deathBenefitPercentage"
                            | translate
                            }}
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <input type="number" class="form-control" [disabled]="disableControl"
                                [(ngModel)]="deathBenefitPercentage" name="deathBenefitPercent"
                                #deathBenefitPercent="ngModel" (click)="$event.stopPropagation();" required [min]="1"
                                placeholder="{{
            'plan.deathBenefitModule.placeholder' | translate
          }}" />

                            <div class="input-group-append">
                                <span class="input-group-text pt-0 pb-0">%</span>
                            </div>
                            <div *ngIf="
            saveClicked &&
            (deathBenefitPercent.invalid ||
              deathBenefitPercent?.errors?.min)
          " class="invalid-feedback d-block">
                                {{
                                "plan.deathBenefitModule.deathBenefitError"
                                | translate
                                }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </div>

</div>