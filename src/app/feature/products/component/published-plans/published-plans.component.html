<section class="container-fluid pr-0">
  <div class="row d-flex justify-content-between">
    <div class="col-lg-9 col-md-8">
      <h3 class="mb-0">{{ "bundleProduct.planTitle" | translate }}</h3>
      <h6>{{ "bundleProduct.planTagline" | translate }}</h6>
    </div>
  </div>

  <div class="card" *ngIf="plans && plans.length > 0">
    <div class="card-header bg-light d-flex justify-content-between">
      <div class="col-lg-9 col-md-8 p-0 align-items-center d-flex">
        <h6 class="mb-0">
          {{ "bundleProduct.youHave" | translate }} {{ plans.length }}
          {{ "bundleProduct.plansPublished" | translate }}
        </h6>
      </div>
      <button class="btn btn-outline-primary btn-sm font-style" (click)="addPlan()" [disabled]="!product">
        <i-feather name="plus" class="md"></i-feather>
        {{ "bundleProduct.newPlan" | translate }}
      </button>
    </div>
    <!-- <div class="pr-0 search-wrapper">
      <input
        type="search"
        class="form-control"
        placeholder="Search Plans"
        aria-label="Username"
        aria-describedby="addon-wrapping"
        (ngModelChange)="onSearch()"
      />
    </div> -->
    <div class="card-content scroll-div" *ngIf="plans && plans.length > 0 && triggerPlan === true">
      <table class="table table-hover table-l">
        <tbody class="tableData" *ngFor="let plan of plans; let i = index">
          <tr [ngClass]="plan.toggle ? 'active' :''" (click)="plan.toggle= !plan.toggle;triggerPlanDetails(plan)">
            <ng-container>
              <td class="pl-4 pointer font-color">
                {{ plan.name }}
                <h6 class="font-color font-light">{{ plan.description }}</h6>
              </td>
              <td class="text-center">
                <span class="badge badge-info">{{ plan.planCode }}</span>
              </td>
            </ng-container>
          </tr>
          <tr *ngIf="plan.toggle">
            <td colspan="2">
              <ng-container class="mt-n3">
                <div class="p-4">
                  <div class="card-content">
                    <div class="d-flex justify-content-between">
                      <div class="form-group">
                        <h6 class="form-control-h6">
                          {{ "plan.underwriting.minSumAssured" | translate }}
                        </h6>
                        <div class="font-default">
                          {{
                          planDetails?.nbUnderwritingConfiguration
                          ?.minFaceAmount
                          }}
                        </div>
                      </div>
                      <div class="form-group">
                        <h6 class="form-control-h6">
                          {{ "plan.underwriting.maxSumAssured" | translate }}
                        </h6>
                        <div class="font-default">
                          {{
                          planDetails?.nbUnderwritingConfiguration
                          ?.maxFaceAmount
                          }}
                        </div>
                      </div>
                      <div class="form-group">
                        <h6 class="form-control-h6">
                          {{ "plan.billing.currenciesPH" | translate }}
                        </h6>
                        <div class="font-default" *ngIf="currency && currency.length > 0">
                          {{ currency[0].currencyId }}
                        </div>
                      </div>
                      <div class="form-group">
                        <h6 class="form-control-h6">
                          {{ "plan.underwriting.coverageTerm" | translate }}
                        </h6>
                        <div class="font-default">
                          {{ planDetails?.generalConfiguration?.policyTermYears }}
                        </div>
                      </div>
                    </div>

                    <div class="form-group" *ngIf="funds.length > 0">
                      <h6 for="example-text-input" class="form-control-label">
                        {{ "fund.fundOptions" | translate }}
                      </h6>
                      <div>
                        <span class="badge badge-success mr-2" *ngFor="let fund of funds">{{
                          fund.description
                          }}</span>
                      </div>
                    </div>
                    <div class="d-flex justify-content-between">
                      <div class="guid-font">{{ plan.planGuid }}</div>
                      <button class="btn btn-outline-primary btn-sm font-style" [disabled]="!product"
                        (click)="viewDetails(plan.planGuid)">
                        <i-feather name="eye" class="md"></i-feather>
                        {{ "bundleProduct.viewDetails" | translate }}
                      </button>
                    </div>
                  </div>
                </div>
              </ng-container>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>